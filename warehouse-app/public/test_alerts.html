<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="test-token">
    <title>اختبار الـ Alerts</title>
    <style>
        body { font-family: Arial, sans-serif; direction: rtl; padding: 20px; }
        .btn { padding: 15px 30px; margin: 10px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
        .btn-success { background: #28a745; color: white; }
        .btn-danger { background: #dc3545; color: white; }
        .test-area { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; }
    </style>
</head>
<body>
    <h1>🧪 اختبار الـ Alerts الجديدة</h1>
    
    <div class="test-area">
        <h3>اختبار الرسائل:</h3>
        <button class="btn btn-success" onclick="testSuccess()">
            ✅ اختبار رسالة النجاح
        </button>
        
        <button class="btn btn-danger" onclick="testError()">
            ❌ اختبار رسالة الخطأ
        </button>
        
        <button class="btn btn-danger" onclick="testDetailedError()">
            ❌ اختبار رسالة خطأ مفصلة
        </button>
    </div>
    
    <div class="test-area">
        <h3>نتائج الاختبار:</h3>
        <div id="results"></div>
    </div>
    
    <!-- Load App.js -->
    <script src="/js/app.js"></script>
    
    <script>
        function testSuccess() {
            const message = "تم إنشاء المنتج 'كوكاكولا 350 مل' بنجاح ✅\n📦 تم إضافة 10 كرتون (240 وحدة)\n🏪 في مخزن العتبة";
            
            if (typeof App !== 'undefined' && App.showSuccessAlert) {
                App.showSuccessAlert(message);
                logResult('✅ تم اختبار رسالة النجاح بنجاح');
            } else {
                alert('❌ App.showSuccessAlert غير متوفر');
                logResult('❌ فشل اختبار رسالة النجاح - App غير محمل');
            }
        }
        
        function testError() {
            const message = "فشل في إضافة المنتج";
            
            if (typeof App !== 'undefined' && App.showErrorAlert) {
                App.showErrorAlert(message);
                logResult('✅ تم اختبار رسالة الخطأ البسيطة');
            } else {
                alert('❌ App.showErrorAlert غير متوفر');
                logResult('❌ فشل اختبار رسالة الخطأ - App غير محمل');
            }
        }
        
        function testDetailedError() {
            const message = "فشل في إنشاء المنتج";
            const details = "SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry 'كوكاكولا' for key 'products_name_ar_unique'";
            
            if (typeof App !== 'undefined' && App.showErrorAlert) {
                App.showErrorAlert(message, details);
                logResult('✅ تم اختبار رسالة الخطأ المفصلة');
            } else {
                alert('❌ App.showErrorAlert غير متوفر');
                logResult('❌ فشل اختبار رسالة الخطأ المفصلة - App غير محمل');
            }
        }
        
        function logResult(message) {
            const results = document.getElementById('results');
            const timestamp = new Date().toLocaleTimeString('ar-EG');
            results.innerHTML += `<div style="padding: 10px; margin: 5px 0; background: white; border-radius: 4px; border-right: 4px solid #007bff;">[${timestamp}] ${message}</div>`;
        }
        
        // Test if App is loaded
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof App !== 'undefined') {
                logResult('✅ تم تحميل App.js بنجاح');
                logResult('📋 المتوفر: ' + Object.keys(App).join(', '));
            } else {
                logResult('❌ لم يتم تحميل App.js');
            }
        });
    </script>
</body>
</html>
